(this["webpackJsonpnasa-image-gallery"]=this["webpackJsonpnasa-image-gallery"]||[]).push([[0],{24:function(e,t,i){},25:function(e,t,i){},32:function(e,t,i){"use strict";i.r(t);var n=i(2),a=i.n(n),c=i(12),s=i.n(c),r=(i(24),i(25),i(18)),o=i(3),l=i(13),d=i.n(l),u={ENDPOINT:{POPULAR:"".concat("https://images-assets.nasa.gov","/popular.json?api_key=").concat("4OeEnAEfBaQ39ZacuIi5dpTTbL9OIRsDYJFAzkm9")},getMostPopular:function(){return d.a.ajax(u.ENDPOINT.POPULAR,{type:"GET",contentType:"application/json; charset=UTF-8"})}},j=u,m=i(11),p=i(14),h=i(10),b=i(0),O=function(e){var t=e.imgSrc,i=e.imgTitle,n=e.imgDescription,a=e.imgDate,c=e.active,s=e.onClose,r=["image-card-modal__popup"];return c&&r.push("image-card-modal__popup--active"),Object(b.jsx)("div",{className:r.join(" "),children:Object(b.jsxs)("div",{className:"image-card-modal__popup-inner",children:[Object(b.jsx)("div",{className:"image-card-modal__popup__photo",children:Object(b.jsx)("img",{src:t,alt:""})}),Object(b.jsxs)("div",{className:"image-card-modal__popup__text",children:[Object(b.jsx)("h1",{children:i}),Object(b.jsx)("p",{children:n}),Object(b.jsx)("p",{children:a})]}),Object(b.jsx)("button",{className:"image-card-modal__popup__close",onClick:s,children:"X"})]})})},g=a.a.memo(O),f=function(e){var t=e.id,i=e.url,a=e.title,c=e.shortDescription,s=e.longDescription,r=e.date,l=e.keywords,d=e.favorite,u=e.handleImageLike,j=Object(n.useState)(!1),O=Object(o.a)(j,2),f=O[0],x=O[1],v=l&&l.join(", ")||c||s,_=r.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return Object(b.jsxs)("div",{className:"tile",children:[Object(b.jsx)("img",{className:"tile__img",src:i,alt:a}),Object(b.jsxs)("div",{className:"tile__content",children:[Object(b.jsx)(h.a,{className:"favorite-icon",icon:d?m.b:p.a,onClick:function(){return u(t)}}),Object(b.jsx)(h.a,{className:"expand-icon",icon:m.a,onClick:function(){return x(!0)}}),Object(b.jsx)("h2",{className:"tile__title",children:a}),Object(b.jsxs)("p",{className:"tile__description",children:[v,Object(b.jsx)("br",{}),"Date: ",_]}),Object(b.jsx)("button",{className:"tile__like-btn",onClick:function(){return x(!0)},children:"Read More"})]}),Object(b.jsx)(g,{imgTitle:a,imgDescription:s,imgDate:_,imgSrc:i,active:f,onClose:function(){x(!1)}})]})},x=a.a.memo(f),v=i(15),_=i(16),k=i(7),N=i(19),y=i(17),D=function(e){Object(N.a)(i,e);var t=Object(y.a)(i);function i(e){var n;return Object(v.a)(this,i),(n=t.call(this,e)).state={columns:1},n.gridRef=a.a.createRef(),n.onResize=n.onResize.bind(Object(k.a)(n)),n}return Object(_.a)(i,[{key:"componentDidMount",value:function(){this.onResize(),window.addEventListener("resize",this.onResize)}},{key:"getColumns",value:function(e){return this.props.brakePoints.reduceRight((function(t,i,n){return i<e?t:n}),this.props.brakePoints.length)+1}},{key:"onResize",value:function(){var e=this.getColumns(this.gridRef.current.offsetWidth);e!==this.state.columns&&this.setState({columns:e})}},{key:"mapChildren",value:function(){for(var e=[],t=this.state.columns,i=0;i<t;i++)e.push([]);return this.props.children.reduce((function(e,i,n){return e[n%t].push(i),e}),e)}},{key:"render",value:function(){var e=["grid"];return this.props.loading&&e.push("grid--loading"),Object(b.jsx)("div",{className:e.join(" "),ref:this.gridRef,children:this.mapChildren().map((function(e,t){return Object(b.jsx)("div",{className:"column",children:e.map((function(e,t){return e}))},t)}))})}}]),i}(a.a.Component),R=a.a.memo(D),P=[350,500,750],I=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),i=t[0],a=t[1],c=Object(n.useState)([]),s=Object(o.a)(c,2),l=s[0],d=s[1],u=Object(n.useState)(!0),m=Object(o.a)(u,2),p=m[0],h=m[1],O=function(e){var t=l.indexOf(e);d(-1===t?[].concat(Object(r.a)(l),[e]):l.filter((function(t){return t!==e})))},g=function(e){setTimeout((function(){a(e.collection.items.filter((function(e){return"image"===e.data[0].media_type&&"PIA21519"!==e.data[0].nasa_id})).map((function(e){return{id:e.data[0].nasa_id,url:e.links[0].href,title:e.data[0].title,shortDescription:e.data[0].description_508,longDescription:e.data[0].description,date:new Date(e.data[0].date_created),keywords:e.data[0].keywords}}))),h(!1)}),3e3)};return Object(n.useEffect)((function(){h(!0),j.getMostPopular().then((function(e){return g(e)})).fail((function(e){console.log("Error retrieving image list",e)}))}),[]),Object(b.jsxs)("div",{className:"gallery",children:[Object(b.jsxs)("h1",{children:[Object(b.jsx)("label",{className:"label",children:"Liked pictures: "}),Object(b.jsx)("label",{className:"liked-images-count",children:l.length})]}),Object(b.jsx)(R,{brakePoints:P,loading:p,children:i.map((function(e){return Object(b.jsx)(x,{id:e.id,url:e.url,shortDescription:e.shortDescription,longDescription:e.longDescription,title:e.title,date:e.date,keywords:e.keywords,favorite:-1!==l.indexOf(e.id),handleImageLike:O},e.id)}))})]})},S=function(){return Object(b.jsx)("header",{id:"header",children:Object(b.jsxs)("div",{className:"inner",children:[Object(b.jsx)("h1",{className:"app-title",children:"NASA Image Gallery"}),Object(b.jsx)("p",{className:"header-description",children:"Image gallery created with NASA's Image and Video Library API"})]})})};var w=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(S,{}),Object(b.jsx)(I,{})]})};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.5ae87d62.chunk.js.map